import{p as C,ax as P,q as z,v as H,P as q,a4 as _,ay as G,ae as U,af as V,D as y,h as L,k as N}from"./framework.Cmgf5mhA.js";import{M as J,a as K,L as Q}from"./theme.B_6bzkYU.js";function A(e,t){return U()?(V(e,t),!0):!1}const Z=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const j=e=>e!=null,ee=Object.prototype.toString,te=e=>ee.call(e)==="[object Object]",F=()=>{};function k(e,t){function o(...r){return new Promise((i,n)=>{Promise.resolve(e(()=>t.apply(this,r),{fn:t,thisArg:this,args:r})).then(i).catch(n)})}return o}const ne=e=>e();function oe(...e){let t=0,o,r=!0,i=F,n,u,l,s,a;!G(e[0])&&typeof e[0]=="object"?{delay:u,trailing:l=!0,leading:s=!0,rejectOnCancel:a=!1}=e[0]:[u,l=!0,s=!0,a=!1]=e;const c=()=>{o&&(clearTimeout(o),o=void 0,i(),i=F)};return m=>{const f=P(u),d=Date.now()-t,h=()=>n=m();return c(),f<=0?(t=Date.now(),h()):(d>f?(t=Date.now(),(s||!r)&&h()):l&&(n=new Promise((w,g)=>{i=a?g:w,o=setTimeout(()=>{t=Date.now(),r=!0,w(h()),c()},Math.max(0,f-d))})),!s&&!o&&(o=setTimeout(()=>r=!0,f)),r=!1,n)}}function B(e){return Array.isArray(e)?e:[e]}function ie(e){return _()}function le(e,t=200,o=!1,r=!0,i=!1){return k(oe(t,o,r,i),e)}function Me(e,t=200,o=!0,r=!0){if(t<=0)return e;const i=C(P(e)),n=le(()=>{i.value=e.value},t,o,r);return z(e,()=>n()),i}function se(e,t=!0,o){ie()?H(e,o):t?e():q(e)}function re(e,t,o){return z(e,t,{...o,immediate:!0})}const O=Z?window:void 0;function S(e){var t;const o=P(e);return(t=o==null?void 0:o.$el)!==null&&t!==void 0?t:o}function b(...e){const t=[],o=()=>{t.forEach(l=>l()),t.length=0},r=(l,s,a,c)=>(l.addEventListener(s,a,c),()=>l.removeEventListener(s,a,c)),i=L(()=>{const l=B(P(e[0])).filter(s=>s!=null);return l.every(s=>typeof s!="string")?l:void 0}),n=re(()=>{var l,s;return[(l=(s=i.value)===null||s===void 0?void 0:s.map(a=>S(a)))!==null&&l!==void 0?l:[O].filter(a=>a!=null),B(P(i.value?e[1]:e[0])),B(N(i.value?e[2]:e[1])),P(i.value?e[3]:e[2])]},([l,s,a,c])=>{if(o(),!(l!=null&&l.length)||!(s!=null&&s.length)||!(a!=null&&a.length))return;const v=te(c)?{...c}:c;t.push(...l.flatMap(m=>s.flatMap(f=>a.map(d=>r(m,f,d,v)))))},{flush:"post"}),u=()=>{n(),o()};return A(o),u}function ue(){const e=y(!1),t=_();return t&&H(()=>{e.value=!0},t),e}function T(e){const t=ue();return L(()=>(t.value,!!e()))}function ae(e,t,o={}){const{window:r=O,...i}=o;let n;const u=T(()=>r&&"MutationObserver"in r),l=()=>{n&&(n.disconnect(),n=void 0)},s=z(L(()=>{const v=B(P(e)).map(S).filter(j);return new Set(v)}),v=>{l(),u.value&&v.size&&(n=new MutationObserver(t),v.forEach(m=>n.observe(m,i)))},{immediate:!0,flush:"post"}),a=()=>n==null?void 0:n.takeRecords(),c=()=>{s(),l()};return A(c),{isSupported:u,stop:c,takeRecords:a}}const ce=500,fe=10;function be(e,t,o){const r=L(()=>S(e));let i,n;function u(){i&&(clearTimeout(i),i=void 0),n=void 0}function l(d){return ce}function s(d){u()}function a(d){u(),n={x:d.x,y:d.y},d.timeStamp,i=setTimeout(()=>{t(d)},l())}function c(d){var h;if(!n)return;const w=d.x-n.x,g=d.y-n.y;Math.sqrt(w*w+g*g)>=((h=void 0)!==null&&h!==void 0?h:fe)&&u()}const v={capture:void 0,once:void 0},m=[b(r,"pointerdown",a,v),b(r,"pointermove",c,v),b(r,["pointerup","pointerleave"],s,v)];return()=>m.forEach(d=>d())}function xe(e={}){const{window:t=O,requestPermissions:o=!1,eventFilter:r=ne}=e,i=T(()=>typeof DeviceMotionEvent<"u"),n=T(()=>i.value&&"requestPermission"in DeviceMotionEvent&&typeof DeviceMotionEvent.requestPermission=="function"),u=y(!1),l=C({x:null,y:null,z:null}),s=C({alpha:null,beta:null,gamma:null}),a=y(0),c=C({x:null,y:null,z:null});function v(){t&&b(t,"devicemotion",k(r,f=>{var d,h,w,g,E,x,$,M,D;l.value={x:((d=f.acceleration)===null||d===void 0?void 0:d.x)||null,y:((h=f.acceleration)===null||h===void 0?void 0:h.y)||null,z:((w=f.acceleration)===null||w===void 0?void 0:w.z)||null},c.value={x:((g=f.accelerationIncludingGravity)===null||g===void 0?void 0:g.x)||null,y:((E=f.accelerationIncludingGravity)===null||E===void 0?void 0:E.y)||null,z:((x=f.accelerationIncludingGravity)===null||x===void 0?void 0:x.z)||null},s.value={alpha:(($=f.rotationRate)===null||$===void 0?void 0:$.alpha)||null,beta:((M=f.rotationRate)===null||M===void 0?void 0:M.beta)||null,gamma:((D=f.rotationRate)===null||D===void 0?void 0:D.gamma)||null},a.value=f.interval}),{passive:!0})}const m=async()=>{if(n.value||(u.value=!0),!u.value&&n.value){const f=DeviceMotionEvent.requestPermission;try{await f()==="granted"&&(u.value=!0,v())}catch(d){console.error(d)}}};return i.value&&(o&&n.value?m().then(()=>v()):v()),{acceleration:l,accelerationIncludingGravity:c,rotationRate:s,interval:a,isSupported:i,requirePermissions:n,ensurePermissions:m,permissionGranted:u}}function De(e={}){const{window:t=O}=e,o=T(()=>t&&"DeviceOrientationEvent"in t),r=y(!1),i=y(null),n=y(null),u=y(null);return t&&o.value&&b(t,"deviceorientation",l=>{r.value=l.absolute,i.value=l.alpha,n.value=l.beta,u.value=l.gamma},{passive:!0}),{isSupported:o,isAbsolute:r,alpha:i,beta:n,gamma:u}}function de(e,t,o={}){const{window:r=O,...i}=o;let n;const u=T(()=>r&&"ResizeObserver"in r),l=()=>{n&&(n.disconnect(),n=void 0)},s=z(L(()=>{const c=P(e);return Array.isArray(c)?c.map(v=>S(v)):[S(c)]}),c=>{if(l(),u.value&&r){n=new ResizeObserver(t);for(const v of c)v&&n.observe(v,i)}},{immediate:!0,flush:"post"}),a=()=>{l(),s()};return A(a),{isSupported:u,stop:a}}const ve={page:e=>[e.pageX,e.pageY],client:e=>[e.clientX,e.clientY],screen:e=>[e.screenX,e.screenY],movement:e=>e instanceof MouseEvent?[e.movementX,e.movementY]:null};function pe(e={}){const{type:t="page",touch:o=!0,resetOnTouchEnds:r=!1,initialValue:i={x:0,y:0},window:n=O,target:u=n,scroll:l=!0,eventFilter:s}=e;let a=null,c=0,v=0;const m=y(i.x),f=y(i.y),d=y(null),h=typeof t=="function"?t:ve[t],w=p=>{const R=h(p);a=p,R&&([m.value,f.value]=R,d.value="mouse"),n&&(c=n.scrollX,v=n.scrollY)},g=p=>{if(p.touches.length>0){const R=h(p.touches[0]);R&&([m.value,f.value]=R,d.value="touch")}},E=()=>{if(!a||!n)return;const p=h(a);a instanceof MouseEvent&&p&&(m.value=p[0]+n.scrollX-c,f.value=p[1]+n.scrollY-v)},x=()=>{m.value=i.x,f.value=i.y},$=s?p=>s(()=>w(p),{}):p=>w(p),M=s?p=>s(()=>g(p),{}):p=>g(p),D=s?()=>s(()=>E(),{}):()=>E();if(u){const p={passive:!0};b(u,["mousemove","dragover"],$,p),o&&t!=="movement"&&(b(u,["touchstart","touchmove"],M,p),r&&b(u,"touchend",x,p)),l&&t==="page"&&b(n,"scroll",D,p)}return{x:m,y:f,sourceType:d}}function Re(e,t={}){const{windowResize:o=!0,windowScroll:r=!0,handleOutside:i=!0,window:n=O}=t,u=t.type||"page",{x:l,y:s,sourceType:a}=pe(t),c=y(e??(n==null?void 0:n.document.body)),v=y(0),m=y(0),f=y(0),d=y(0),h=y(0),w=y(0),g=y(!0);function E(){if(!n)return;const M=S(c);if(!M||!(M instanceof Element))return;const{left:D,top:p,width:R,height:W}=M.getBoundingClientRect();f.value=D+(u==="page"?n.pageXOffset:0),d.value=p+(u==="page"?n.pageYOffset:0),h.value=W,w.value=R;const Y=l.value-f.value,X=s.value-d.value;g.value=R===0||W===0||Y<0||X<0||Y>R||X>W,(i||!g.value)&&(v.value=Y,m.value=X)}const x=[];function $(){x.forEach(M=>M()),x.length=0}if(se(()=>{E()}),n){const{stop:M}=de(c,E),{stop:D}=ae(c,E,{attributeFilter:["style","class"]}),p=z([c,l,s],E);x.push(M,D,p),b(document,"mouseleave",()=>g.value=!0,{passive:!0}),r&&x.push(b("scroll",E,{capture:!0,passive:!0})),o&&x.push(b("resize",E,{passive:!0}))}return{x:l,y:s,sourceType:a,elementX:v,elementY:m,elementPositionX:f,elementPositionY:d,elementHeight:h,elementWidth:w,isOutside:g,stop:$}}const I={loadingInstance:null,dialogInstance:null};function me(e="加载中..."){I.loadingInstance&&I.loadingInstance.hide(),e!==!1&&(I.loadingInstance=Q({delay:0,fullscreen:!0,indicator:!0,inheritColor:!1,loading:!0,preventScrollThrough:!0,showOverlay:!0,size:"large",text:e,zIndex:3500}))}function he(e){I.dialogInstance&&I.dialogInstance.destroy(),typeof e=="string"&&(e={body:e});const{theme:t="info",header:o,body:r,confirmBtn:i=void 0,onConfirmCallBack:n=()=>{}}=e,u=e.onConfirmCallBack?e.cancelBtn:null;I.dialogInstance=K({mode:"modal",placement:"center",theme:t,closeBtn:!1,destroyOnClose:!0,header:o,body:r,footer:!0,confirmBtn:i,confirmLoading:!1,confirmOnEnter:!0,cancelBtn:u,onConfirm:()=>{n(),I.dialogInstance.destroy()}})}function ye(e){typeof e=="string"&&(e={content:e});const{theme:t="info",closeBtn:o=!1,content:r,duration:i=1500}=e;J(t,{closeBtn:o,content:r,icon:!0,placement:"center"},i)}function ge(e="程序报错",t,o){if(console.log(e,t),o)o(t);else throw new Error(e,{cause:t})}const Pe={loading:me,dialog:he,message:ye,error:ge};export{le as a,xe as b,De as c,Pe as m,be as o,Me as r,Re as u};
