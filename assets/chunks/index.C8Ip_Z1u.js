import{v as H,P as G,q as z,au as I,a4 as q,av as j,aw as U,D as g,p as C,z as B,h as T,ax as D,k as V}from"./framework.BBXmkLIm.js";function $(e,t,i={}){let r,u,n,l=!0;const o=()=>{l=!0,n()};z(e,o,{flush:"sync",...i});const s=typeof t=="function"?t:t.get,a=typeof t=="function"?void 0:t.set,v=I((f,c)=>(u=f,n=c,{get(){return l&&(r=s(r),l=!1),u(),r},set(h){a==null||a(h)}}));return v.trigger=o,v}function F(e){return j()?(U(e),!0):!1}const N=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const J=e=>e!=null,K=Object.prototype.toString,Q=e=>K.call(e)==="[object Object]";function Z(e,t){function i(...r){return new Promise((u,n)=>{Promise.resolve(e(()=>t.apply(this,r),{fn:t,thisArg:this,args:r})).then(u).catch(n)})}return i}const ee=e=>e();function Y(e){return Array.isArray(e)?e:[e]}function te(e){return q()}function k(e,t=!0,i){te()?H(e,i):t?e():G(e)}function ne(e,t,i){return z(e,t,{...i,immediate:!0})}const P=N?window:void 0;function R(e){var t;const i=D(e);return(t=i==null?void 0:i.$el)!=null?t:i}function O(...e){const t=[],i=()=>{t.forEach(o=>o()),t.length=0},r=(o,s,a,v)=>(o.addEventListener(s,a,v),()=>o.removeEventListener(s,a,v)),u=T(()=>{const o=Y(D(e[0])).filter(s=>s!=null);return o.every(s=>typeof s!="string")?o:void 0}),n=ne(()=>{var o,s;return[(s=(o=u.value)==null?void 0:o.map(a=>R(a)))!=null?s:[P].filter(a=>a!=null),Y(D(u.value?e[1]:e[0])),Y(V(u.value?e[2]:e[1])),D(u.value?e[3]:e[2])]},([o,s,a,v])=>{if(i(),!(o!=null&&o.length)||!(s!=null&&s.length)||!(a!=null&&a.length))return;const f=Q(v)?{...v}:v;t.push(...o.flatMap(c=>s.flatMap(h=>a.map(m=>r(c,h,m,f)))))},{flush:"post"}),l=()=>{n(),i()};return F(i),l}function oe(){const e=g(!1),t=q();return t&&H(()=>{e.value=!0},t),e}function W(e){const t=oe();return T(()=>(t.value,!!e()))}function se(e,t,i={}){const{window:r=P,...u}=i;let n;const l=W(()=>r&&"MutationObserver"in r),o=()=>{n&&(n.disconnect(),n=void 0)},s=T(()=>{const c=D(e),h=Y(c).map(R).filter(J);return new Set(h)}),a=z(()=>s.value,c=>{o(),l.value&&c.size&&(n=new MutationObserver(t),c.forEach(h=>n.observe(h,u)))},{immediate:!0,flush:"post"}),v=()=>n==null?void 0:n.takeRecords(),f=()=>{a(),o()};return F(f),{isSupported:l,stop:f,takeRecords:v}}const ie=500,le=10;function ve(e,t,i){var r,u;const n=T(()=>R(e));let l,o;function s(){l&&(clearTimeout(l),l=void 0),o=void 0}function a(d){s()}function v(d){var M,b,y,w;(M=void 0)!=null&&M.self&&d.target!==n.value||(s(),(b=void 0)!=null&&b.prevent&&d.preventDefault(),(y=void 0)!=null&&y.stop&&d.stopPropagation(),o={x:d.x,y:d.y},d.timeStamp,l=setTimeout(()=>{t(d)},(w=void 0)!=null?w:ie))}function f(d){var M,b,y,w;if((M=void 0)!=null&&M.self&&d.target!==n.value||!o)return;(b=void 0)!=null&&b.prevent&&d.preventDefault(),(y=void 0)!=null&&y.stop&&d.stopPropagation();const x=d.x-o.x,E=d.y-o.y;Math.sqrt(x*x+E*E)>=((w=void 0)!=null?w:le)&&s()}const c={capture:(r=void 0)==null?void 0:r.capture,once:(u=void 0)==null?void 0:u.once},h=[O(n,"pointerdown",v,c),O(n,"pointermove",f,c),O(n,["pointerup","pointerleave"],a,c)];return()=>h.forEach(d=>d())}function re(e){const t=q(),i=$(()=>null,()=>t.proxy.$el);return B(i.trigger),H(i.trigger),i}function de(e={}){const{window:t=P,requestPermissions:i=!1,eventFilter:r=ee}=e,u=W(()=>typeof DeviceMotionEvent<"u"),n=W(()=>u.value&&"requestPermission"in DeviceMotionEvent&&typeof DeviceMotionEvent.requestPermission=="function"),l=g(!1),o=C({x:null,y:null,z:null}),s=C({alpha:null,beta:null,gamma:null}),a=g(0),v=C({x:null,y:null,z:null});function f(){if(t){const h=Z(r,m=>{var d,M,b,y,w,x,E,_,p;o.value={x:((d=m.acceleration)==null?void 0:d.x)||null,y:((M=m.acceleration)==null?void 0:M.y)||null,z:((b=m.acceleration)==null?void 0:b.z)||null},v.value={x:((y=m.accelerationIncludingGravity)==null?void 0:y.x)||null,y:((w=m.accelerationIncludingGravity)==null?void 0:w.y)||null,z:((x=m.accelerationIncludingGravity)==null?void 0:x.z)||null},s.value={alpha:((E=m.rotationRate)==null?void 0:E.alpha)||null,beta:((_=m.rotationRate)==null?void 0:_.beta)||null,gamma:((p=m.rotationRate)==null?void 0:p.gamma)||null},a.value=m.interval});O(t,"devicemotion",h,{passive:!0})}}const c=async()=>{if(n.value||(l.value=!0),!l.value&&n.value){const h=DeviceMotionEvent.requestPermission;try{await h()==="granted"&&(l.value=!0,f())}catch(m){console.error(m)}}};return u.value&&(i&&n.value?c().then(()=>f()):f()),{acceleration:o,accelerationIncludingGravity:v,rotationRate:s,interval:a,isSupported:u,requirePermissions:n,ensurePermissions:c,permissionGranted:l}}function fe(e={}){const{window:t=P}=e,i=W(()=>t&&"DeviceOrientationEvent"in t),r=g(!1),u=g(null),n=g(null),l=g(null);return t&&i.value&&O(t,"deviceorientation",o=>{r.value=o.absolute,u.value=o.alpha,n.value=o.beta,l.value=o.gamma},{passive:!0}),{isSupported:i,isAbsolute:r,alpha:u,beta:n,gamma:l}}function ue(e,t,i={}){const{window:r=P,...u}=i;let n;const l=W(()=>r&&"ResizeObserver"in r),o=()=>{n&&(n.disconnect(),n=void 0)},s=T(()=>{const f=D(e);return Array.isArray(f)?f.map(c=>R(c)):[R(f)]}),a=z(s,f=>{if(o(),l.value&&r){n=new ResizeObserver(t);for(const c of f)c&&n.observe(c,u)}},{immediate:!0,flush:"post"}),v=()=>{o(),a()};return F(v),{isSupported:l,stop:v}}const ae={page:e=>[e.pageX,e.pageY],client:e=>[e.clientX,e.clientY],screen:e=>[e.screenX,e.screenY],movement:e=>e instanceof MouseEvent?[e.movementX,e.movementY]:null};function ce(e={}){const{type:t="page",touch:i=!0,resetOnTouchEnds:r=!1,initialValue:u={x:0,y:0},window:n=P,target:l=n,scroll:o=!0,eventFilter:s}=e;let a=null,v=0,f=0;const c=g(u.x),h=g(u.y),m=g(null),d=typeof t=="function"?t:ae[t],M=p=>{const S=d(p);a=p,S&&([c.value,h.value]=S,m.value="mouse"),n&&(v=n.scrollX,f=n.scrollY)},b=p=>{if(p.touches.length>0){const S=d(p.touches[0]);S&&([c.value,h.value]=S,m.value="touch")}},y=()=>{if(!a||!n)return;const p=d(a);a instanceof MouseEvent&&p&&(c.value=p[0]+n.scrollX-v,h.value=p[1]+n.scrollY-f)},w=()=>{c.value=u.x,h.value=u.y},x=s?p=>s(()=>M(p),{}):p=>M(p),E=s?p=>s(()=>b(p),{}):p=>b(p),_=s?()=>s(()=>y(),{}):()=>y();if(l){const p={passive:!0};O(l,["mousemove","dragover"],x,p),i&&t!=="movement"&&(O(l,["touchstart","touchmove"],E,p),r&&O(l,"touchend",w,p)),o&&t==="page"&&O(n,"scroll",_,p)}return{x:c,y:h,sourceType:m}}function me(e,t={}){const{windowResize:i=!0,windowScroll:r=!0,handleOutside:u=!0,window:n=P}=t,l=t.type||"page",{x:o,y:s,sourceType:a}=ce(t),v=g(e??(n==null?void 0:n.document.body)),f=g(0),c=g(0),h=g(0),m=g(0),d=g(0),M=g(0),b=g(!0);function y(){if(!n)return;const E=R(v);if(!E||!(E instanceof Element))return;const{left:_,top:p,width:S,height:X}=E.getBoundingClientRect();h.value=_+(l==="page"?n.pageXOffset:0),m.value=p+(l==="page"?n.pageYOffset:0),d.value=X,M.value=S;const A=o.value-h.value,L=s.value-m.value;b.value=S===0||X===0||A<0||L<0||A>S||L>X,u&&(f.value=A,c.value=L)}const w=[];function x(){w.forEach(E=>E()),w.length=0}if(k(()=>{y()}),n){const{stop:E}=ue(v,y),{stop:_}=se(v,y,{attributeFilter:["style","class"]}),p=z([v,o,s],y);w.push(E,_,p),O(document,"mouseleave",()=>b.value=!0,{passive:!0}),r&&w.push(O("scroll",y,{capture:!0,passive:!0})),i&&w.push(O("resize",y,{passive:!0}))}return{x:o,y:s,sourceType:a,elementX:f,elementY:c,elementPositionX:h,elementPositionY:m,elementHeight:d,elementWidth:M,isOutside:b,stop:x}}function he(e=re()){const t=g(),i=()=>{const r=R(e);r&&(t.value=r.parentElement)};return k(i),z(()=>D(e),i),t}export{me as a,de as b,fe as c,ve as o,he as u};
